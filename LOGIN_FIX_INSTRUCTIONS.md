# إصلاح مشكلة تسجيل الدخول

## المشكلة
- التطبيق يعمل بشكل طبيعي على لابتوبك
- على جهاز آخر لا يعمل تسجيل الدخول بشكل صحيح
- يظهر اسم "admin" بدلاً من "manager"

## الحلول المطبقة

### 1. إصلاح عرض اسم المستخدم
- تم إصلاح `currentUserName` في `auth_provider.dart` ليعرض `username` بدلاً من `name`
- الآن سيظهر "manager" بدلاً من "المدير" في رسائل النجاح

### 2. تحسين إنشاء المستخدمين الافتراضيين
- تم إضافة المزيد من التشخيص في `_ensureDefaultUsersExist()`
- تم إضافة دالة `checkAndFixDefaultUsers()` في `database_service.dart`
- يتم استدعاء هذه الدالة عند تهيئة قاعدة البيانات

### 3. إصلاحات إضافية
- تم تحسين رسائل التشخيص لتتبع مشاكل تسجيل الدخول
- تم ضمان إنشاء المستخدمين الافتراضيين على جميع الأجهزة

## خطوات الحل

### للجهاز الذي لا يعمل:

1. **احذف قاعدة البيانات القديمة** (إذا أمكن):
   - ابحث عن ملف `pos_office.db` في مجلد التطبيق
   - احذف الملف
   - أعد تشغيل التطبيق

2. **أو استخدم بيانات الدخول الصحيحة**:
   - اسم المستخدم: `manager`
   - كلمة المرور: `admin123`

3. **تحقق من رسائل التشخيص**:
   - افتح وحدة التحكم (Console) لرؤية رسائل التشخيص
   - ابحث عن رسائل مثل "بدء التأكد من وجود المستخدمين الافتراضيين"

## بيانات الدخول الافتراضية

| الدور | اسم المستخدم | كلمة المرور |
|-------|---------------|--------------|
| مدير | manager | admin123 |
| مشرف | supervisor | super123 |
| موظف | employee | emp123 |

## ملاحظات مهمة

- التطبيق الآن يتحقق تلقائياً من وجود المستخدمين الافتراضيين عند كل بدء تشغيل
- إذا لم تكن قاعدة البيانات موجودة، سيتم إنشاؤها تلقائياً مع المستخدمين الافتراضيين
- جميع المستخدمين الافتراضيين يتم تحديثهم بكلمات المرور الصحيحة في كل مرة

## إذا استمرت المشكلة

1. تأكد من أن التطبيق يستخدم أحدث إصدار من الكود
2. تحقق من رسائل التشخيص في وحدة التحكم
3. جرب حذف قاعدة البيانات وإعادة تشغيل التطبيق
4. تأكد من أن الجهاز الآخر يستخدم نفس إصدار التطبيق
